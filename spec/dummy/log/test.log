  [1m[35m (4.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" integer NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" integer NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:14:58.015246', '2026-01-09 10:14:58.015248') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:14:58.081045"], ["delivered_at", nil], ["created_at", "2026-01-09 10:14:58.086186"], ["updated_at", "2026-01-09 10:14:58.086186"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:14:58.087697"], ["delivered_at", nil], ["created_at", "2026-01-09 10:14:58.087940"], ["updated_at", "2026-01-09 10:14:58.087940"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:14:58.088577"], ["delivered_at", nil], ["created_at", "2026-01-09 10:14:58.088775"], ["updated_at", "2026-01-09 10:14:58.088775"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:14:58.098293"], ["delivered_at", nil], ["created_at", "2026-01-09 10:14:58.098800"], ["updated_at", "2026-01-09 10:14:58.098800"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:14:58.099676"], ["delivered_at", nil], ["created_at", "2026-01-09 10:14:58.099901"], ["updated_at", "2026-01-09 10:14:58.099901"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:14:58.104274"], ["delivered_at", nil], ["created_at", "2026-01-09 10:14:58.104506"], ["updated_at", "2026-01-09 10:14:58.104506"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:14:58.106501"], ["delivered_at", nil], ["created_at", "2026-01-09 10:14:58.106701"], ["updated_at", "2026-01-09 10:14:58.106701"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:14:58.107272"], ["delivered_at", nil], ["created_at", "2026-01-09 10:14:58.107455"], ["updated_at", "2026-01-09 10:14:58.107455"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:14:58.115422"], ["delivered_at", nil], ["created_at", "2026-01-09 10:14:58.115704"], ["updated_at", "2026-01-09 10:14:58.115704"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:14:58.125426"], ["updated_at", "2026-01-09 10:14:58.125426"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" integer NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" integer NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:15:02.884813', '2026-01-09 10:15:02.884814') RETURNING "key"[0m
  [1m[35m (4.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" integer NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" integer NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:15:21.606798', '2026-01-09 10:15:21.606799') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:21.674413"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:21.679539"], ["updated_at", "2026-01-09 10:15:21.679539"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:21.681111"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:21.681349"], ["updated_at", "2026-01-09 10:15:21.681349"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:21.682011"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:21.682214"], ["updated_at", "2026-01-09 10:15:21.682214"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:21.692299"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:21.692861"], ["updated_at", "2026-01-09 10:15:21.692861"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:21.693824"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:21.694053"], ["updated_at", "2026-01-09 10:15:21.694053"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:21.698150"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:21.698378"], ["updated_at", "2026-01-09 10:15:21.698378"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:21.700564"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:21.700825"], ["updated_at", "2026-01-09 10:15:21.700825"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:21.701425"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:21.701611"], ["updated_at", "2026-01-09 10:15:21.701611"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:21.709926"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:21.710200"], ["updated_at", "2026-01-09 10:15:21.710200"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:15:21.721046"], ["updated_at", "2026-01-09 10:15:21.721046"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:15:56.310934', '2026-01-09 10:15:56.310936') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:56.373946"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:56.378938"], ["updated_at", "2026-01-09 10:15:56.378938"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:56.380477"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:56.380726"], ["updated_at", "2026-01-09 10:15:56.380726"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:56.381357"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:56.381549"], ["updated_at", "2026-01-09 10:15:56.381549"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:56.390673"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:56.391183"], ["updated_at", "2026-01-09 10:15:56.391183"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:56.392041"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:56.392249"], ["updated_at", "2026-01-09 10:15:56.392249"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:56.396452"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:56.396752"], ["updated_at", "2026-01-09 10:15:56.396752"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:56.398824"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:56.399022"], ["updated_at", "2026-01-09 10:15:56.399022"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:56.399570"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:56.399746"], ["updated_at", "2026-01-09 10:15:56.399746"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:15:56.407201"], ["delivered_at", nil], ["created_at", "2026-01-09 10:15:56.407475"], ["updated_at", "2026-01-09 10:15:56.407475"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:15:56.416585"], ["updated_at", "2026-01-09 10:15:56.416585"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:16:01.637979', '2026-01-09 10:16:01.637980') RETURNING "key"[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:16:12.824091', '2026-01-09 10:16:12.824093') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:12.875215"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:12.880268"], ["updated_at", "2026-01-09 10:16:12.880268"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:12.881659"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:12.881946"], ["updated_at", "2026-01-09 10:16:12.881946"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:12.882634"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:12.882835"], ["updated_at", "2026-01-09 10:16:12.882835"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:12.892737"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:12.893297"], ["updated_at", "2026-01-09 10:16:12.893297"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:12.894281"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:12.894508"], ["updated_at", "2026-01-09 10:16:12.894508"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:12.898194"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:12.898510"], ["updated_at", "2026-01-09 10:16:12.898510"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:12.900445"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:12.900715"], ["updated_at", "2026-01-09 10:16:12.900715"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:12.901389"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:12.901604"], ["updated_at", "2026-01-09 10:16:12.901604"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:12.908187"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:12.908537"], ["updated_at", "2026-01-09 10:16:12.908537"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:16:12.916671"], ["updated_at", "2026-01-09 10:16:12.916671"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "sent_emails_emails";
INSERT INTO "sent_emails_emails" ("id", "message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (1, '<test-1@example.com>', 'TestMailer', 'welcome_email', 'test_mailer/welcome_email', '{}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["user@example.com"]', '[]', '[]', 'Welcome to our service', 'Welcome! This is your welcome email.', '<p>Welcome! This is your welcome email.</p>', '{}', 'sent', '2026-01-09 10:16:12.918408', NULL, '2026-01-09 10:16:12.918569', '2026-01-09 10:16:12.918576'), (2, '<test-2@example.com>', 'TestMailer', 'notification_email', 'test_mailer/notification_email', '{"user_id":1}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["recipient@example.com","other@example.com"]', '["cc@example.com"]', '["bcc@example.com"]', 'Your notification', 'You have a new notification.', '<p>You have a new notification.</p>', '{}', 'delivered', '2026-01-09 08:16:12.918580', '2026-01-09 10:16:12.918602', '2026-01-09 08:16:12.918605', '2026-01-09 10:16:12.918614'), (3, '<test-3@example.com>', 'AnotherMailer', 'report', 'another_mailer/report', '{}', 'smtp', 'smtp', '{}', 'system@example.com', '["admin@example.com"]', '[]', '[]', 'Daily report', 'Here is your daily report.', '<p>Here is your daily report.</p>', '{}', 'bounced', '2026-01-04 10:16:12.918618', NULL, '2026-01-04 10:16:12.919037', '2026-01-04 10:16:12.919058')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: signature verification failed!
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: expected 64 byte signature, got 4
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "sent_emails_events";
INSERT INTO "sent_emails_events" ("id", "email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (1, 1, 'queued', 'mailpace', '{"event":"email.queued"}', '2026-01-09 09:16:12.924575', '2026-01-09 09:16:12.924592', '2026-01-09 09:16:12.924601'), (2, 2, 'delivered', 'mailpace', '{"event":"email.delivered"}', '2026-01-09 10:16:12.924607', '2026-01-09 10:16:12.924611', '2026-01-09 10:16:12.924614'), (3, 3, 'bounced', 'smtp', '{"error":"User unknown"}', '2026-01-05 10:16:12.924617', '2026-01-05 10:16:12.924637', '2026-01-05 10:16:12.924648')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:16:16.196636', '2026-01-09 10:16:16.196638') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "sent_emails_emails";
DELETE FROM "sent_emails_events";
INSERT INTO "sent_emails_emails" ("id", "message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (1, '<test-1@example.com>', 'TestMailer', 'welcome_email', 'test_mailer/welcome_email', '{}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["user@example.com"]', '[]', '[]', 'Welcome to our service', 'Welcome! This is your welcome email.', '<p>Welcome! This is your welcome email.</p>', '{}', 'sent', '2026-01-09 10:16:16.197258', NULL, '2026-01-09 10:16:16.197300', '2026-01-09 10:16:16.197308'), (2, '<test-2@example.com>', 'TestMailer', 'notification_email', 'test_mailer/notification_email', '{"user_id":1}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["recipient@example.com","other@example.com"]', '["cc@example.com"]', '["bcc@example.com"]', 'Your notification', 'You have a new notification.', '<p>You have a new notification.</p>', '{}', 'delivered', '2026-01-09 08:16:16.197312', '2026-01-09 10:16:16.197333', '2026-01-09 08:16:16.197336', '2026-01-09 10:16:16.197344'), (3, '<test-3@example.com>', 'AnotherMailer', 'report', 'another_mailer/report', '{}', 'smtp', 'smtp', '{}', 'system@example.com', '["admin@example.com"]', '[]', '[]', 'Daily report', 'Here is your daily report.', '<p>Here is your daily report.</p>', '{}', 'bounced', '2026-01-04 10:16:16.197347', NULL, '2026-01-04 10:16:16.197386', '2026-01-04 10:16:16.197399');
INSERT INTO "sent_emails_events" ("id", "email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (1, 1, 'queued', 'mailpace', '{"event":"email.queued"}', '2026-01-09 09:16:16.197887', '2026-01-09 09:16:16.197901', '2026-01-09 09:16:16.197909'), (2, 2, 'delivered', 'mailpace', '{"event":"email.delivered"}', '2026-01-09 10:16:16.197914', '2026-01-09 10:16:16.197917', '2026-01-09 10:16:16.197920'), (3, 3, 'bounced', 'smtp', '{"error":"User unknown"}', '2026-01-05 10:16:16.197923', '2026-01-05 10:16:16.197935', '2026-01-05 10:16:16.197944')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:16:22.749114', '2026-01-09 10:16:22.749115') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:22.800479"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:22.805545"], ["updated_at", "2026-01-09 10:16:22.805545"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:22.806872"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:22.807121"], ["updated_at", "2026-01-09 10:16:22.807121"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:22.807798"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:22.807999"], ["updated_at", "2026-01-09 10:16:22.807999"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:22.818077"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:22.818547"], ["updated_at", "2026-01-09 10:16:22.818547"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:22.819487"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:22.819705"], ["updated_at", "2026-01-09 10:16:22.819705"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:22.823172"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:22.823409"], ["updated_at", "2026-01-09 10:16:22.823409"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:22.825134"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:22.825336"], ["updated_at", "2026-01-09 10:16:22.825336"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:22.825931"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:22.826314"], ["updated_at", "2026-01-09 10:16:22.826314"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:22.831522"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:22.831795"], ["updated_at", "2026-01-09 10:16:22.831795"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:16:22.839945"], ["updated_at", "2026-01-09 10:16:22.839945"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "sent_emails_emails";
INSERT INTO "sent_emails_emails" ("id", "message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (1, '<test-1@example.com>', 'TestMailer', 'welcome_email', 'test_mailer/welcome_email', '{}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["user@example.com"]', '[]', '[]', 'Welcome to our service', 'Welcome! This is your welcome email.', '<p>Welcome! This is your welcome email.</p>', '{}', 'sent', '2026-01-09 10:16:22.841431', NULL, '2026-01-09 10:16:22.841453', '2026-01-09 10:16:22.841460'), (2, '<test-2@example.com>', 'TestMailer', 'notification_email', 'test_mailer/notification_email', '{"user_id":1}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["recipient@example.com","other@example.com"]', '["cc@example.com"]', '["bcc@example.com"]', 'Your notification', 'You have a new notification.', '<p>You have a new notification.</p>', '{}', 'delivered', '2026-01-09 08:16:22.841464', '2026-01-09 10:16:22.841490', '2026-01-09 08:16:22.841494', '2026-01-09 10:16:22.841502'), (3, '<test-3@example.com>', 'AnotherMailer', 'report', 'another_mailer/report', '{}', 'smtp', 'smtp', '{}', 'system@example.com', '["admin@example.com"]', '[]', '[]', 'Daily report', 'Here is your daily report.', '<p>Here is your daily report.</p>', '{}', 'bounced', '2026-01-04 10:16:22.841506', NULL, '2026-01-04 10:16:22.841556', '2026-01-04 10:16:22.841570')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: signature verification failed!
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: expected 64 byte signature, got 4
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "sent_emails_events";
INSERT INTO "sent_emails_events" ("id", "email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (1, 1, 'queued', 'mailpace', '{"event":"email.queued"}', '2026-01-09 09:16:22.847011', '2026-01-09 09:16:22.847033', '2026-01-09 09:16:22.847042'), (2, 2, 'delivered', 'mailpace', '{"event":"email.delivered"}', '2026-01-09 10:16:22.847048', '2026-01-09 10:16:22.847051', '2026-01-09 10:16:22.847054'), (3, 3, 'bounced', 'smtp', '{"error":"User unknown"}', '2026-01-05 10:16:22.847057', '2026-01-05 10:16:22.847077', '2026-01-05 10:16:22.847089')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:16:26.700715', '2026-01-09 10:16:26.700717') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:26.753013"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:26.757795"], ["updated_at", "2026-01-09 10:16:26.757795"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:26.759023"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:26.759253"], ["updated_at", "2026-01-09 10:16:26.759253"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:26.759869"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:26.760058"], ["updated_at", "2026-01-09 10:16:26.760058"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:26.769497"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:26.770010"], ["updated_at", "2026-01-09 10:16:26.770010"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:26.770942"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:26.771143"], ["updated_at", "2026-01-09 10:16:26.771143"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:26.774544"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:26.774748"], ["updated_at", "2026-01-09 10:16:26.774748"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:26.776353"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:26.776552"], ["updated_at", "2026-01-09 10:16:26.776552"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:26.777130"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:26.777321"], ["updated_at", "2026-01-09 10:16:26.777321"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:26.783039"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:26.783268"], ["updated_at", "2026-01-09 10:16:26.783268"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:16:26.791006"], ["updated_at", "2026-01-09 10:16:26.791006"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "sent_emails_emails";
INSERT INTO "sent_emails_emails" ("id", "message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (1, '<test-1@example.com>', 'TestMailer', 'welcome_email', 'test_mailer/welcome_email', '{}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["user@example.com"]', '[]', '[]', 'Welcome to our service', 'Welcome! This is your welcome email.', '<p>Welcome! This is your welcome email.</p>', '{}', 'sent', '2026-01-09 10:16:26.792379', NULL, '2026-01-09 10:16:26.792397', '2026-01-09 10:16:26.792404'), (2, '<test-2@example.com>', 'TestMailer', 'notification_email', 'test_mailer/notification_email', '{"user_id":1}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["recipient@example.com","other@example.com"]', '["cc@example.com"]', '["bcc@example.com"]', 'Your notification', 'You have a new notification.', '<p>You have a new notification.</p>', '{}', 'delivered', '2026-01-09 08:16:26.792408', '2026-01-09 10:16:26.792431', '2026-01-09 08:16:26.792434', '2026-01-09 10:16:26.792441'), (3, '<test-3@example.com>', 'AnotherMailer', 'report', 'another_mailer/report', '{}', 'smtp', 'smtp', '{}', 'system@example.com', '["admin@example.com"]', '[]', '[]', 'Daily report', 'Here is your daily report.', '<p>Here is your daily report.</p>', '{}', 'bounced', '2026-01-04 10:16:26.792444', NULL, '2026-01-04 10:16:26.792487', '2026-01-04 10:16:26.792499')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: signature verification failed!
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: expected 64 byte signature, got 4
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "sent_emails_events";
INSERT INTO "sent_emails_events" ("id", "email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (1, 1, 'queued', 'mailpace', '{"event":"email.queued"}', '2026-01-09 09:16:26.797747', '2026-01-09 09:16:26.797764', '2026-01-09 09:16:26.797771'), (2, 2, 'delivered', 'mailpace', '{"event":"email.delivered"}', '2026-01-09 10:16:26.797777', '2026-01-09 10:16:26.797780', '2026-01-09 10:16:26.797784'), (3, 3, 'bounced', 'smtp', '{"error":"User unknown"}', '2026-01-05 10:16:26.797787', '2026-01-05 10:16:26.797806', '2026-01-05 10:16:26.797819')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:16:30.105957', '2026-01-09 10:16:30.105959') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "sent_emails_emails";
DELETE FROM "sent_emails_events";
INSERT INTO "sent_emails_emails" ("id", "message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (1, '<test-1@example.com>', 'TestMailer', 'welcome_email', 'test_mailer/welcome_email', '{}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["user@example.com"]', '[]', '[]', 'Welcome to our service', 'Welcome! This is your welcome email.', '<p>Welcome! This is your welcome email.</p>', '{}', 'sent', '2026-01-09 10:16:30.106695', NULL, '2026-01-09 10:16:30.106743', '2026-01-09 10:16:30.106751'), (2, '<test-2@example.com>', 'TestMailer', 'notification_email', 'test_mailer/notification_email', '{"user_id":1}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["recipient@example.com","other@example.com"]', '["cc@example.com"]', '["bcc@example.com"]', 'Your notification', 'You have a new notification.', '<p>You have a new notification.</p>', '{}', 'delivered', '2026-01-09 08:16:30.106756', '2026-01-09 10:16:30.106779', '2026-01-09 08:16:30.106782', '2026-01-09 10:16:30.106790'), (3, '<test-3@example.com>', 'AnotherMailer', 'report', 'another_mailer/report', '{}', 'smtp', 'smtp', '{}', 'system@example.com', '["admin@example.com"]', '[]', '[]', 'Daily report', 'Here is your daily report.', '<p>Here is your daily report.</p>', '{}', 'bounced', '2026-01-04 10:16:30.106793', NULL, '2026-01-04 10:16:30.106840', '2026-01-04 10:16:30.106855');
INSERT INTO "sent_emails_events" ("id", "email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (1, 1, 'queued', 'mailpace', '{"event":"email.queued"}', '2026-01-09 09:16:30.107420', '2026-01-09 09:16:30.107438', '2026-01-09 09:16:30.107446'), (2, 2, 'delivered', 'mailpace', '{"event":"email.delivered"}', '2026-01-09 10:16:30.107452', '2026-01-09 10:16:30.107455', '2026-01-09 10:16:30.107459'), (3, 3, 'bounced', 'smtp', '{"error":"User unknown"}', '2026-01-05 10:16:30.107462', '2026-01-05 10:16:30.107480', '2026-01-05 10:16:30.107492')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:16:40.902881', '2026-01-09 10:16:40.902882') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:40.953021"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:40.957860"], ["updated_at", "2026-01-09 10:16:40.957860"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:40.959195"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:40.959433"], ["updated_at", "2026-01-09 10:16:40.959433"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:40.960094"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:40.960290"], ["updated_at", "2026-01-09 10:16:40.960290"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:40.970273"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:40.970802"], ["updated_at", "2026-01-09 10:16:40.970802"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:40.971778"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:40.972006"], ["updated_at", "2026-01-09 10:16:40.972006"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:40.975486"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:40.975745"], ["updated_at", "2026-01-09 10:16:40.975745"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:40.977457"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:40.977671"], ["updated_at", "2026-01-09 10:16:40.977671"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:40.978280"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:40.978479"], ["updated_at", "2026-01-09 10:16:40.978479"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:16:40.984538"], ["delivered_at", nil], ["created_at", "2026-01-09 10:16:40.984899"], ["updated_at", "2026-01-09 10:16:40.984899"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:16:40.993046"], ["updated_at", "2026-01-09 10:16:40.993046"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "sent_emails_emails";
INSERT INTO "sent_emails_emails" ("id", "message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (1, '<test-1@example.com>', 'TestMailer', 'welcome_email', 'test_mailer/welcome_email', '{}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["user@example.com"]', '[]', '[]', 'Welcome to our service', 'Welcome! This is your welcome email.', '<p>Welcome! This is your welcome email.</p>', '{}', 'sent', '2026-01-09 10:16:40.994520', NULL, '2026-01-09 10:16:40.994541', '2026-01-09 10:16:40.994547'), (2, '<test-2@example.com>', 'TestMailer', 'notification_email', 'test_mailer/notification_email', '{"user_id":1}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["recipient@example.com","other@example.com"]', '["cc@example.com"]', '["bcc@example.com"]', 'Your notification', 'You have a new notification.', '<p>You have a new notification.</p>', '{}', 'delivered', '2026-01-09 08:16:40.994551', '2026-01-09 10:16:40.994573', '2026-01-09 08:16:40.994576', '2026-01-09 10:16:40.994583'), (3, '<test-3@example.com>', 'AnotherMailer', 'report', 'another_mailer/report', '{}', 'smtp', 'smtp', '{}', 'system@example.com', '["admin@example.com"]', '[]', '[]', 'Daily report', 'Here is your daily report.', '<p>Here is your daily report.</p>', '{}', 'bounced', '2026-01-04 10:16:40.994587', NULL, '2026-01-04 10:16:40.994632', '2026-01-04 10:16:40.994645')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: signature verification failed!
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: expected 64 byte signature, got 4
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "sent_emails_events";
INSERT INTO "sent_emails_events" ("id", "email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (1, 1, 'queued', 'mailpace', '{"event":"email.queued"}', '2026-01-09 09:16:40.999834', '2026-01-09 09:16:40.999854', '2026-01-09 09:16:40.999862'), (2, 2, 'delivered', 'mailpace', '{"event":"email.delivered"}', '2026-01-09 10:16:40.999869', '2026-01-09 10:16:40.999872', '2026-01-09 10:16:40.999875'), (3, 3, 'bounced', 'smtp', '{"error":"User unknown"}', '2026-01-05 10:16:40.999878', '2026-01-05 10:16:40.999900', '2026-01-05 10:16:40.999910')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (3.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:18:27.034162', '2026-01-09 10:18:27.034164') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:27.101135"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:27.106353"], ["updated_at", "2026-01-09 10:18:27.106353"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:27.107877"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:27.108111"], ["updated_at", "2026-01-09 10:18:27.108111"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:27.108716"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:27.108909"], ["updated_at", "2026-01-09 10:18:27.108909"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:27.118267"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:27.118761"], ["updated_at", "2026-01-09 10:18:27.118761"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:27.119653"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:27.119862"], ["updated_at", "2026-01-09 10:18:27.119862"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:27.124159"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:27.124563"], ["updated_at", "2026-01-09 10:18:27.124563"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:27.127169"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:27.127392"], ["updated_at", "2026-01-09 10:18:27.127392"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:27.128007"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:27.128209"], ["updated_at", "2026-01-09 10:18:27.128209"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:27.136586"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:27.137072"], ["updated_at", "2026-01-09 10:18:27.137072"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:18:27.146922"], ["updated_at", "2026-01-09 10:18:27.146922"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "sent_emails_emails";
INSERT INTO "sent_emails_emails" ("id", "message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (1, '<test-1@example.com>', 'TestMailer', 'welcome_email', 'test_mailer/welcome_email', '{}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["user@example.com"]', '[]', '[]', 'Welcome to our service', 'Welcome! This is your welcome email.', '<p>Welcome! This is your welcome email.</p>', '{}', 'sent', '2026-01-09 10:18:27.148572', NULL, '2026-01-09 10:18:27.148604', '2026-01-09 10:18:27.148609'), (2, '<test-2@example.com>', 'TestMailer', 'notification_email', 'test_mailer/notification_email', '{"user_id":1}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["recipient@example.com","other@example.com"]', '["cc@example.com"]', '["bcc@example.com"]', 'Your notification', 'You have a new notification.', '<p>You have a new notification.</p>', '{}', 'delivered', '2026-01-09 08:18:27.148613', '2026-01-09 10:18:27.148636', '2026-01-09 08:18:27.148639', '2026-01-09 10:18:27.148646'), (3, '<test-3@example.com>', 'AnotherMailer', 'report', 'another_mailer/report', '{}', 'smtp', 'smtp', '{}', 'system@example.com', '["admin@example.com"]', '[]', '[]', 'Daily report', 'Here is your daily report.', '<p>Here is your daily report.</p>', '{}', 'bounced', '2026-01-04 10:18:27.148650', NULL, '2026-01-04 10:18:27.148714', '2026-01-04 10:18:27.148727')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: signature verification failed!
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: expected 64 byte signature, got 4
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "sent_emails_events";
INSERT INTO "sent_emails_events" ("id", "email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (1, 1, 'queued', 'mailpace', '{"event":"email.queued"}', '2026-01-09 09:18:27.154504', '2026-01-09 09:18:27.154519', '2026-01-09 09:18:27.154526'), (2, 2, 'delivered', 'mailpace', '{"event":"email.delivered"}', '2026-01-09 10:18:27.154532', '2026-01-09 10:18:27.154536', '2026-01-09 10:18:27.154539'), (3, 3, 'bounced', 'smtp', '{"error":"User unknown"}', '2026-01-05 10:18:27.154542', '2026-01-05 10:18:27.154560', '2026-01-05 10:18:27.154571')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:18:32.866634', '2026-01-09 10:18:32.866636') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:18:42.125449', '2026-01-09 10:18:42.125450') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:42.156959"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:42.162591"], ["updated_at", "2026-01-09 10:18:42.162591"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:42.170855"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:42.171269"], ["updated_at", "2026-01-09 10:18:42.171269"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:42.172603"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:42.172865"], ["updated_at", "2026-01-09 10:18:42.172865"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:42.173559"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:42.173760"], ["updated_at", "2026-01-09 10:18:42.173760"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:42.174349"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:42.174533"], ["updated_at", "2026-01-09 10:18:42.174533"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:42.175089"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:42.175270"], ["updated_at", "2026-01-09 10:18:42.175270"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:42.178865"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:42.179169"], ["updated_at", "2026-01-09 10:18:42.179169"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:42.181350"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:42.181742"], ["updated_at", "2026-01-09 10:18:42.181742"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:42.182464"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:42.182683"], ["updated_at", "2026-01-09 10:18:42.182683"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:42.190166"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:42.190578"], ["updated_at", "2026-01-09 10:18:42.190578"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:18:42.200000"], ["updated_at", "2026-01-09 10:18:42.200000"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "sent_emails_emails";
INSERT INTO "sent_emails_emails" ("id", "message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (1, '<test-1@example.com>', 'TestMailer', 'welcome_email', 'test_mailer/welcome_email', '{}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["user@example.com"]', '[]', '[]', 'Welcome to our service', 'Welcome! This is your welcome email.', '<p>Welcome! This is your welcome email.</p>', '{}', 'sent', '2026-01-09 10:18:42.201894', NULL, '2026-01-09 10:18:42.201922', '2026-01-09 10:18:42.201927'), (2, '<test-2@example.com>', 'TestMailer', 'notification_email', 'test_mailer/notification_email', '{"user_id":1}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["recipient@example.com","other@example.com"]', '["cc@example.com"]', '["bcc@example.com"]', 'Your notification', 'You have a new notification.', '<p>You have a new notification.</p>', '{}', 'delivered', '2026-01-09 08:18:42.201931', '2026-01-09 10:18:42.201956', '2026-01-09 08:18:42.201959', '2026-01-09 10:18:42.201967'), (3, '<test-3@example.com>', 'AnotherMailer', 'report', 'another_mailer/report', '{}', 'smtp', 'smtp', '{}', 'system@example.com', '["admin@example.com"]', '[]', '[]', 'Daily report', 'Here is your daily report.', '<p>Here is your daily report.</p>', '{}', 'bounced', '2026-01-04 10:18:42.201982', NULL, '2026-01-04 10:18:42.202085', '2026-01-04 10:18:42.202100')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: signature verification failed!
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: expected 64 byte signature, got 4
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "sent_emails_events";
INSERT INTO "sent_emails_events" ("id", "email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (1, 1, 'queued', 'mailpace', '{"event":"email.queued"}', '2026-01-09 09:18:42.208184', '2026-01-09 09:18:42.208208', '2026-01-09 09:18:42.208215'), (2, 2, 'delivered', 'mailpace', '{"event":"email.delivered"}', '2026-01-09 10:18:42.208221', '2026-01-09 10:18:42.208225', '2026-01-09 10:18:42.208228'), (3, 3, 'bounced', 'smtp', '{"error":"User unknown"}', '2026-01-05 10:18:42.208231', '2026-01-05 10:18:42.208255', '2026-01-05 10:18:42.208266')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:18:45.551086', '2026-01-09 10:18:45.551087') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:45.585785"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:45.591109"], ["updated_at", "2026-01-09 10:18:45.591109"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:18:49.388447', '2026-01-09 10:18:49.388448') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:49.416718"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:49.421779"], ["updated_at", "2026-01-09 10:18:49.421779"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:49.429789"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:49.430190"], ["updated_at", "2026-01-09 10:18:49.430190"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:49.431210"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:49.431462"], ["updated_at", "2026-01-09 10:18:49.431462"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:49.432142"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:49.432342"], ["updated_at", "2026-01-09 10:18:49.432342"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:49.432919"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:49.433109"], ["updated_at", "2026-01-09 10:18:49.433109"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:49.433668"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:49.433850"], ["updated_at", "2026-01-09 10:18:49.433850"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:49.436836"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:49.437092"], ["updated_at", "2026-01-09 10:18:49.437092"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:49.438542"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:49.438764"], ["updated_at", "2026-01-09 10:18:49.438764"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:49.439338"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:49.439521"], ["updated_at", "2026-01-09 10:18:49.439521"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:18:49.444467"], ["delivered_at", nil], ["created_at", "2026-01-09 10:18:49.444756"], ["updated_at", "2026-01-09 10:18:49.444756"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:18:49.452315"], ["updated_at", "2026-01-09 10:18:49.452315"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "sent_emails_emails";
INSERT INTO "sent_emails_emails" ("id", "message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (1, '<test-1@example.com>', 'TestMailer', 'welcome_email', 'test_mailer/welcome_email', '{}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["user@example.com"]', '[]', '[]', 'Welcome to our service', 'Welcome! This is your welcome email.', '<p>Welcome! This is your welcome email.</p>', '{}', 'sent', '2026-01-09 10:18:49.453702', NULL, '2026-01-09 10:18:49.453722', '2026-01-09 10:18:49.453728'), (2, '<test-2@example.com>', 'TestMailer', 'notification_email', 'test_mailer/notification_email', '{"user_id":1}', 'smtp', 'mailpace', '{"address":"smtp.mailpace.com","port":587}', 'noreply@example.com', '["recipient@example.com","other@example.com"]', '["cc@example.com"]', '["bcc@example.com"]', 'Your notification', 'You have a new notification.', '<p>You have a new notification.</p>', '{}', 'delivered', '2026-01-09 08:18:49.453741', '2026-01-09 10:18:49.453766', '2026-01-09 08:18:49.453769', '2026-01-09 10:18:49.453776'), (3, '<test-3@example.com>', 'AnotherMailer', 'report', 'another_mailer/report', '{}', 'smtp', 'smtp', '{}', 'system@example.com', '["admin@example.com"]', '[]', '[]', 'Daily report', 'Here is your daily report.', '<p>Here is your daily report.</p>', '{}', 'bounced', '2026-01-04 10:18:49.453779', NULL, '2026-01-04 10:18:49.453827', '2026-01-04 10:18:49.453841')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: signature verification failed!
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: expected 64 byte signature, got 4
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mFixtures Load (0.0ms)[0m  [1m[31mDELETE FROM "sent_emails_events";
INSERT INTO "sent_emails_events" ("id", "email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (1, 1, 'queued', 'mailpace', '{"event":"email.queued"}', '2026-01-09 09:18:49.459034', '2026-01-09 09:18:49.459054', '2026-01-09 09:18:49.459064'), (2, 2, 'delivered', 'mailpace', '{"event":"email.delivered"}', '2026-01-09 10:18:49.459070', '2026-01-09 10:18:49.459073', '2026-01-09 10:18:49.459076'), (3, 3, 'bounced', 'smtp', '{"error":"User unknown"}', '2026-01-05 10:18:49.459079', '2026-01-05 10:18:49.459097', '2026-01-05 10:18:49.459107')[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:19:30.890708', '2026-01-09 10:19:30.890710') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:30.924951"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:30.930397"], ["updated_at", "2026-01-09 10:19:30.930397"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:30.940939"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:30.941399"], ["updated_at", "2026-01-09 10:19:30.941399"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:30.942760"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:30.943001"], ["updated_at", "2026-01-09 10:19:30.943001"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:30.943622"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:30.943816"], ["updated_at", "2026-01-09 10:19:30.943816"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:30.944408"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:30.944602"], ["updated_at", "2026-01-09 10:19:30.944602"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:30.955200"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:30.955796"], ["updated_at", "2026-01-09 10:19:30.955796"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:30.961399"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:30.961962"], ["updated_at", "2026-01-09 10:19:30.961962"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:30.964570"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:30.964968"], ["updated_at", "2026-01-09 10:19:30.964968"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:30.966159"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:30.966427"], ["updated_at", "2026-01-09 10:19:30.966427"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:30.975402"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:30.976136"], ["updated_at", "2026-01-09 10:19:30.976136"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:19:30.988256"], ["updated_at", "2026-01-09 10:19:30.988256"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: signature verification failed!
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: expected 64 byte signature, got 4
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:30.994967"], ["updated_at", "2026-01-09 10:19:30.994967"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_events"[0m
  [1m[36mSentEmails::Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_events"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:30.997331"], ["updated_at", "2026-01-09 10:19:30.997331"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:30.998837"], ["updated_at", "2026-01-09 10:19:30.998837"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:30.999836"], ["updated_at", "2026-01-09 10:19:30.999836"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-07 10:19:31.002050"], ["updated_at", "2026-01-09 10:19:31.002249"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 09:19:31.002686"], ["updated_at", "2026-01-09 10:19:31.002753"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "delivered"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:31.003869"], ["updated_at", "2026-01-09 10:19:31.003869"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "pending"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:31.004324"], ["updated_at", "2026-01-09 10:19:31.004324"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ? AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [["status", "delivered"], ["id", 1], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ? AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [["status", "delivered"], ["id", 2], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ?[0m  [["status", "delivered"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", "Welcome to our service"], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:31.005755"], ["updated_at", "2026-01-09 10:19:31.005755"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE (subject ILIKE ? OR ? = ANY(to_addresses)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%Welcome%"], [nil, "%Welcome%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:31.006744"], ["updated_at", "2026-01-09 10:19:31.006744"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE (subject ILIKE ? OR ? = ANY(to_addresses)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%user@example.com%"], [nil, "%user@example.com%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:31.007523"], ["updated_at", "2026-01-09 10:19:31.007523"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE (? = ANY(to_addresses)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "user@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:31.008320"], ["updated_at", "2026-01-09 10:19:31.008320"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Create (0.2ms)[0m  [1m[32mINSERT INTO "sent_emails_events" ("email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["event_type", "queued"], ["provider", "test"], ["payload", nil], ["occurred_at", "2026-01-09 09:19:31.008609"], ["created_at", "2026-01-09 10:19:31.010751"], ["updated_at", "2026-01-09 10:19:31.010751"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_events" ("email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["event_type", "delivered"], ["provider", "test"], ["payload", nil], ["occurred_at", "2026-01-09 09:49:31.011494"], ["created_at", "2026-01-09 10:19:31.011641"], ["updated_at", "2026-01-09 10:19:31.011641"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_events".* FROM "sent_emails_events" WHERE "sent_emails_events"."email_id" = ? ORDER BY "sent_emails_events"."occurred_at" DESC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:31.013000"], ["updated_at", "2026-01-09 10:19:31.013000"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_events".* FROM "sent_emails_events" WHERE "sent_emails_events"."email_id" = ? ORDER BY "sent_emails_events"."occurred_at" DESC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:31.013911"], ["updated_at", "2026-01-09 10:19:31.013911"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:31.014474"], ["updated_at", "2026-01-09 10:19:31.014474"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", "welcome_email"], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:31.015018"], ["updated_at", "2026-01-09 10:19:31.015018"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:31.015539"], ["updated_at", "2026-01-09 10:19:31.015539"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"first@example.com\",\"second@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:31.016092"], ["updated_at", "2026-01-09 10:19:31.016092"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"to@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:31.016615"], ["updated_at", "2026-01-09 10:19:31.016615"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", "[\"user@example.com\"]"], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:31.017165"], ["updated_at", "2026-01-09 10:19:31.017165"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:19:34.674472', '2026-01-09 10:19:34.674474') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:34.702095"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.706946"], ["updated_at", "2026-01-09 10:19:34.706946"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:34.714901"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.715261"], ["updated_at", "2026-01-09 10:19:34.715261"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:34.716203"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.716413"], ["updated_at", "2026-01-09 10:19:34.716413"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:34.717018"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.717211"], ["updated_at", "2026-01-09 10:19:34.717211"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:34.717776"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.717963"], ["updated_at", "2026-01-09 10:19:34.717963"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:34.727458"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.727862"], ["updated_at", "2026-01-09 10:19:34.727862"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:34.731378"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.731626"], ["updated_at", "2026-01-09 10:19:34.731626"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:34.733064"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.733277"], ["updated_at", "2026-01-09 10:19:34.733277"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:34.734191"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.734386"], ["updated_at", "2026-01-09 10:19:34.734386"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:34.739809"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.740240"], ["updated_at", "2026-01-09 10:19:34.740240"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:19:34.748534"], ["updated_at", "2026-01-09 10:19:34.748534"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: signature verification failed!
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: expected 64 byte signature, got 4
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.752652"], ["updated_at", "2026-01-09 10:19:34.752652"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_events"[0m
  [1m[36mSentEmails::Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_events"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.754567"], ["updated_at", "2026-01-09 10:19:34.754567"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.755933"], ["updated_at", "2026-01-09 10:19:34.755933"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.756825"], ["updated_at", "2026-01-09 10:19:34.756825"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-07 10:19:34.758846"], ["updated_at", "2026-01-09 10:19:34.758973"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 09:19:34.759332"], ["updated_at", "2026-01-09 10:19:34.759395"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "delivered"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.760273"], ["updated_at", "2026-01-09 10:19:34.760273"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "pending"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.760617"], ["updated_at", "2026-01-09 10:19:34.760617"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ? AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [["status", "delivered"], ["id", 1], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ? AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [["status", "delivered"], ["id", 2], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ?[0m  [["status", "delivered"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", "Welcome to our service"], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.761554"], ["updated_at", "2026-01-09 10:19:34.761554"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE (subject ILIKE ? OR ? = ANY(to_addresses)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%Welcome%"], [nil, "%Welcome%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.762361"], ["updated_at", "2026-01-09 10:19:34.762361"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE (subject ILIKE ? OR ? = ANY(to_addresses)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%user@example.com%"], [nil, "%user@example.com%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.763118"], ["updated_at", "2026-01-09 10:19:34.763118"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE (? = ANY(to_addresses)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "user@example.com"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.763863"], ["updated_at", "2026-01-09 10:19:34.763863"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_events" ("email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["event_type", "queued"], ["provider", "test"], ["payload", nil], ["occurred_at", "2026-01-09 09:19:34.764150"], ["created_at", "2026-01-09 10:19:34.765770"], ["updated_at", "2026-01-09 10:19:34.765770"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_events" ("email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["event_type", "delivered"], ["provider", "test"], ["payload", nil], ["occurred_at", "2026-01-09 09:49:34.766044"], ["created_at", "2026-01-09 10:19:34.766123"], ["updated_at", "2026-01-09 10:19:34.766123"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_events".* FROM "sent_emails_events" WHERE "sent_emails_events"."email_id" = ? ORDER BY "sent_emails_events"."occurred_at" DESC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.766996"], ["updated_at", "2026-01-09 10:19:34.766996"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_events".* FROM "sent_emails_events" WHERE "sent_emails_events"."email_id" = ? ORDER BY "sent_emails_events"."occurred_at" DESC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.767728"], ["updated_at", "2026-01-09 10:19:34.767728"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.768265"], ["updated_at", "2026-01-09 10:19:34.768265"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", "welcome_email"], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.768787"], ["updated_at", "2026-01-09 10:19:34.768787"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.769317"], ["updated_at", "2026-01-09 10:19:34.769317"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"first@example.com\",\"second@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.769842"], ["updated_at", "2026-01-09 10:19:34.769842"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"to@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.770367"], ["updated_at", "2026-01-09 10:19:34.770367"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", "[\"user@example.com\"]"], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:34.770891"], ["updated_at", "2026-01-09 10:19:34.770891"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:19:42.658640', '2026-01-09 10:19:42.658642') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:42.686081"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.691295"], ["updated_at", "2026-01-09 10:19:42.691295"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:42.699444"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.699857"], ["updated_at", "2026-01-09 10:19:42.699857"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:42.700899"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.701154"], ["updated_at", "2026-01-09 10:19:42.701154"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:42.701845"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.702050"], ["updated_at", "2026-01-09 10:19:42.702050"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:42.702644"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.702837"], ["updated_at", "2026-01-09 10:19:42.702837"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:42.703396"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.703582"], ["updated_at", "2026-01-09 10:19:42.703582"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:42.706602"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.706888"], ["updated_at", "2026-01-09 10:19:42.706888"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:42.708570"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.708889"], ["updated_at", "2026-01-09 10:19:42.708889"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:42.709519"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.709717"], ["updated_at", "2026-01-09 10:19:42.709717"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:42.714782"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.715126"], ["updated_at", "2026-01-09 10:19:42.715126"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:19:42.723047"], ["updated_at", "2026-01-09 10:19:42.723047"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: signature verification failed!
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: expected 64 byte signature, got 4
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.727176"], ["updated_at", "2026-01-09 10:19:42.727176"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_events"[0m
  [1m[36mSentEmails::Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_events"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.728818"], ["updated_at", "2026-01-09 10:19:42.728818"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.730067"], ["updated_at", "2026-01-09 10:19:42.730067"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.730917"], ["updated_at", "2026-01-09 10:19:42.730917"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-07 10:19:42.732853"], ["updated_at", "2026-01-09 10:19:42.732971"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 09:19:42.733272"], ["updated_at", "2026-01-09 10:19:42.733333"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "delivered"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.734189"], ["updated_at", "2026-01-09 10:19:42.734189"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "pending"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.734509"], ["updated_at", "2026-01-09 10:19:42.734509"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ? AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [["status", "delivered"], ["id", 1], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ? AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [["status", "delivered"], ["id", 2], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ?[0m  [["status", "delivered"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", "Welcome to our service"], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.735402"], ["updated_at", "2026-01-09 10:19:42.735402"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE ((subject LIKE ? OR subject LIKE ?) OR (to_addresses LIKE ?)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%Welcome%"], [nil, "%Welcome%"], [nil, "%Welcome%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.736076"], ["updated_at", "2026-01-09 10:19:42.736076"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE ((subject LIKE ? OR subject LIKE ?) OR (to_addresses LIKE ?)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%user@example.com%"], [nil, "%user@example.com%"], [nil, "%user@example.com%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.736720"], ["updated_at", "2026-01-09 10:19:42.736720"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE (to_addresses LIKE ?) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%user@example.com%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.737356"], ["updated_at", "2026-01-09 10:19:42.737356"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_events" ("email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["event_type", "queued"], ["provider", "test"], ["payload", nil], ["occurred_at", "2026-01-09 09:19:42.737629"], ["created_at", "2026-01-09 10:19:42.739223"], ["updated_at", "2026-01-09 10:19:42.739223"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_events" ("email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["event_type", "delivered"], ["provider", "test"], ["payload", nil], ["occurred_at", "2026-01-09 09:49:42.739485"], ["created_at", "2026-01-09 10:19:42.739562"], ["updated_at", "2026-01-09 10:19:42.739562"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_events".* FROM "sent_emails_events" WHERE "sent_emails_events"."email_id" = ? ORDER BY "sent_emails_events"."occurred_at" DESC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.740368"], ["updated_at", "2026-01-09 10:19:42.740368"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_events".* FROM "sent_emails_events" WHERE "sent_emails_events"."email_id" = ? ORDER BY "sent_emails_events"."occurred_at" DESC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.741224"], ["updated_at", "2026-01-09 10:19:42.741224"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.741829"], ["updated_at", "2026-01-09 10:19:42.741829"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", "welcome_email"], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.742409"], ["updated_at", "2026-01-09 10:19:42.742409"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.742927"], ["updated_at", "2026-01-09 10:19:42.742927"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"first@example.com\",\"second@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.743470"], ["updated_at", "2026-01-09 10:19:42.743470"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"to@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.744026"], ["updated_at", "2026-01-09 10:19:42.744026"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", "[\"user@example.com\"]"], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:42.744565"], ["updated_at", "2026-01-09 10:19:42.744565"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:19:46.194074', '2026-01-09 10:19:46.194075') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:46.221758"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.226668"], ["updated_at", "2026-01-09 10:19:46.226668"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:46.234829"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.235202"], ["updated_at", "2026-01-09 10:19:46.235202"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:46.236211"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.236444"], ["updated_at", "2026-01-09 10:19:46.236444"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:46.237126"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.237342"], ["updated_at", "2026-01-09 10:19:46.237342"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:46.237964"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.238159"], ["updated_at", "2026-01-09 10:19:46.238159"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:46.238734"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.238919"], ["updated_at", "2026-01-09 10:19:46.238919"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:46.241900"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.242101"], ["updated_at", "2026-01-09 10:19:46.242101"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:46.243491"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.243716"], ["updated_at", "2026-01-09 10:19:46.243716"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:46.244301"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.244500"], ["updated_at", "2026-01-09 10:19:46.244500"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:46.249384"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.249629"], ["updated_at", "2026-01-09 10:19:46.249629"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:19:46.257074"], ["updated_at", "2026-01-09 10:19:46.257074"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: signature verification failed!
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: expected 64 byte signature, got 4
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.260966"], ["updated_at", "2026-01-09 10:19:46.260966"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_events"[0m
  [1m[36mSentEmails::Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_events"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.262361"], ["updated_at", "2026-01-09 10:19:46.262361"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.263489"], ["updated_at", "2026-01-09 10:19:46.263489"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.264305"], ["updated_at", "2026-01-09 10:19:46.264305"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-07 10:19:46.266191"], ["updated_at", "2026-01-09 10:19:46.266293"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 09:19:46.266558"], ["updated_at", "2026-01-09 10:19:46.266616"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "delivered"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.267455"], ["updated_at", "2026-01-09 10:19:46.267455"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "pending"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.267778"], ["updated_at", "2026-01-09 10:19:46.267778"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ? AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [["status", "delivered"], ["id", 1], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ? AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [["status", "delivered"], ["id", 2], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ?[0m  [["status", "delivered"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", "Welcome to our service"], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.268667"], ["updated_at", "2026-01-09 10:19:46.268667"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE ((subject LIKE ? OR subject LIKE ?) OR (to_addresses LIKE ?)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%Welcome%"], [nil, "%Welcome%"], [nil, "%Welcome%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.269322"], ["updated_at", "2026-01-09 10:19:46.269322"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE ((subject LIKE ? OR subject LIKE ?) OR (to_addresses LIKE ?)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%user@example.com%"], [nil, "%user@example.com%"], [nil, "%user@example.com%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.269962"], ["updated_at", "2026-01-09 10:19:46.269962"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE (to_addresses LIKE ?) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%user@example.com%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.270576"], ["updated_at", "2026-01-09 10:19:46.270576"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_events" ("email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["event_type", "queued"], ["provider", "test"], ["payload", nil], ["occurred_at", "2026-01-09 09:19:46.270858"], ["created_at", "2026-01-09 10:19:46.272319"], ["updated_at", "2026-01-09 10:19:46.272319"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_events" ("email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["event_type", "delivered"], ["provider", "test"], ["payload", nil], ["occurred_at", "2026-01-09 09:49:46.272565"], ["created_at", "2026-01-09 10:19:46.272639"], ["updated_at", "2026-01-09 10:19:46.272639"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_events".* FROM "sent_emails_events" WHERE "sent_emails_events"."email_id" = ? ORDER BY "sent_emails_events"."occurred_at" DESC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.273424"], ["updated_at", "2026-01-09 10:19:46.273424"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_events".* FROM "sent_emails_events" WHERE "sent_emails_events"."email_id" = ? ORDER BY "sent_emails_events"."occurred_at" DESC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.274112"], ["updated_at", "2026-01-09 10:19:46.274112"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.274639"], ["updated_at", "2026-01-09 10:19:46.274639"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", "welcome_email"], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.275161"], ["updated_at", "2026-01-09 10:19:46.275161"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.275649"], ["updated_at", "2026-01-09 10:19:46.275649"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"first@example.com\",\"second@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.276144"], ["updated_at", "2026-01-09 10:19:46.276144"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"to@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.276683"], ["updated_at", "2026-01-09 10:19:46.276683"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", "[\"user@example.com\"]"], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:46.277190"], ["updated_at", "2026-01-09 10:19:46.277190"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:19:50.037047', '2026-01-09 10:19:50.037049') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:19:50.066475"], ["delivered_at", nil], ["created_at", "2026-01-09 10:19:50.073882"], ["updated_at", "2026-01-09 10:19:50.073882"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:20:00.457417', '2026-01-09 10:20:00.457418') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: signature verification failed!
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:20:15.219939', '2026-01-09 10:20:15.219941') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:15.247797"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.252748"], ["updated_at", "2026-01-09 10:20:15.252748"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:15.260563"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.260817"], ["updated_at", "2026-01-09 10:20:15.260817"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:15.261709"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.261917"], ["updated_at", "2026-01-09 10:20:15.261917"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:15.262534"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.262710"], ["updated_at", "2026-01-09 10:20:15.262710"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:15.263262"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.263449"], ["updated_at", "2026-01-09 10:20:15.263449"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:15.273114"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.273644"], ["updated_at", "2026-01-09 10:20:15.273644"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:15.274632"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.274862"], ["updated_at", "2026-01-09 10:20:15.274862"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:15.277048"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.277364"], ["updated_at", "2026-01-09 10:20:15.277364"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:15.278008"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.278198"], ["updated_at", "2026-01-09 10:20:15.278198"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:15.283902"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.284140"], ["updated_at", "2026-01-09 10:20:15.284140"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:20:15.292140"], ["updated_at", "2026-01-09 10:20:15.292140"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: expected 64 byte signature, got 4
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.298739"], ["updated_at", "2026-01-09 10:20:15.298739"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_events"[0m
  [1m[36mSentEmails::Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_events"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.300350"], ["updated_at", "2026-01-09 10:20:15.300350"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.301599"], ["updated_at", "2026-01-09 10:20:15.301599"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.302462"], ["updated_at", "2026-01-09 10:20:15.302462"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-07 10:20:15.304444"], ["updated_at", "2026-01-09 10:20:15.304568"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 09:20:15.304865"], ["updated_at", "2026-01-09 10:20:15.304929"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "delivered"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.305831"], ["updated_at", "2026-01-09 10:20:15.305831"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "pending"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.306160"], ["updated_at", "2026-01-09 10:20:15.306160"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ? AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [["status", "delivered"], ["id", 1], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ? AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [["status", "delivered"], ["id", 2], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ?[0m  [["status", "delivered"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", "Welcome to our service"], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.307079"], ["updated_at", "2026-01-09 10:20:15.307079"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE ((subject LIKE ? OR subject LIKE ?) OR (to_addresses LIKE ?)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%Welcome%"], [nil, "%Welcome%"], [nil, "%Welcome%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.307781"], ["updated_at", "2026-01-09 10:20:15.307781"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE ((subject LIKE ? OR subject LIKE ?) OR (to_addresses LIKE ?)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%user@example.com%"], [nil, "%user@example.com%"], [nil, "%user@example.com%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.308444"], ["updated_at", "2026-01-09 10:20:15.308444"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE (to_addresses LIKE ?) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%user@example.com%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.309100"], ["updated_at", "2026-01-09 10:20:15.309100"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_events" ("email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["event_type", "queued"], ["provider", "test"], ["payload", nil], ["occurred_at", "2026-01-09 09:20:15.309475"], ["created_at", "2026-01-09 10:20:15.311295"], ["updated_at", "2026-01-09 10:20:15.311295"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_events" ("email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["event_type", "delivered"], ["provider", "test"], ["payload", nil], ["occurred_at", "2026-01-09 09:50:15.311634"], ["created_at", "2026-01-09 10:20:15.311720"], ["updated_at", "2026-01-09 10:20:15.311720"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_events".* FROM "sent_emails_events" WHERE "sent_emails_events"."email_id" = ? ORDER BY "sent_emails_events"."occurred_at" DESC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.312765"], ["updated_at", "2026-01-09 10:20:15.312765"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_events".* FROM "sent_emails_events" WHERE "sent_emails_events"."email_id" = ? ORDER BY "sent_emails_events"."occurred_at" DESC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.313590"], ["updated_at", "2026-01-09 10:20:15.313590"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.314139"], ["updated_at", "2026-01-09 10:20:15.314139"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", "welcome_email"], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.314698"], ["updated_at", "2026-01-09 10:20:15.314698"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.315229"], ["updated_at", "2026-01-09 10:20:15.315229"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"first@example.com\",\"second@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.315801"], ["updated_at", "2026-01-09 10:20:15.315801"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"to@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.316342"], ["updated_at", "2026-01-09 10:20:15.316342"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", "[\"user@example.com\"]"], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:15.316867"], ["updated_at", "2026-01-09 10:20:15.316867"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:20:43.271670', '2026-01-09 10:20:43.271671') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:43.299447"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.304464"], ["updated_at", "2026-01-09 10:20:43.304464"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:43.312392"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.312670"], ["updated_at", "2026-01-09 10:20:43.312670"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:43.313599"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.313816"], ["updated_at", "2026-01-09 10:20:43.313816"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:43.314431"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.314624"], ["updated_at", "2026-01-09 10:20:43.314624"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:43.315194"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.315389"], ["updated_at", "2026-01-09 10:20:43.315389"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:43.315942"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.316122"], ["updated_at", "2026-01-09 10:20:43.316122"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:43.316644"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.316811"], ["updated_at", "2026-01-09 10:20:43.316811"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:43.318129"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.318311"], ["updated_at", "2026-01-09 10:20:43.318311"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:43.318876"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.319054"], ["updated_at", "2026-01-09 10:20:43.319054"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:20:43.324023"], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.324212"], ["updated_at", "2026-01-09 10:20:43.324212"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:20:43.331444"], ["updated_at", "2026-01-09 10:20:43.331444"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: expected 64 byte signature, got 4
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.337314"], ["updated_at", "2026-01-09 10:20:43.337314"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_events"[0m
  [1m[36mSentEmails::Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_events"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.338720"], ["updated_at", "2026-01-09 10:20:43.338720"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.339838"], ["updated_at", "2026-01-09 10:20:43.339838"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.340625"], ["updated_at", "2026-01-09 10:20:43.340625"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-07 10:20:43.342483"], ["updated_at", "2026-01-09 10:20:43.342588"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 09:20:43.342852"], ["updated_at", "2026-01-09 10:20:43.342908"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.1ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "delivered"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.343733"], ["updated_at", "2026-01-09 10:20:43.343733"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "pending"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.344047"], ["updated_at", "2026-01-09 10:20:43.344047"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ? AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [["status", "delivered"], ["id", 1], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ? AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [["status", "delivered"], ["id", 2], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ?[0m  [["status", "delivered"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", "Welcome to our service"], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.344926"], ["updated_at", "2026-01-09 10:20:43.344926"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE ((subject LIKE ?) OR (to_addresses LIKE ?)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%Welcome%"], [nil, "%Welcome%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.345753"], ["updated_at", "2026-01-09 10:20:43.345753"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE ((subject LIKE ?) OR (to_addresses LIKE ?)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%user@example.com%"], [nil, "%user@example.com%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.346396"], ["updated_at", "2026-01-09 10:20:43.346396"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE (to_addresses LIKE ?) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%user@example.com%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.347019"], ["updated_at", "2026-01-09 10:20:43.347019"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_events" ("email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["event_type", "queued"], ["provider", "test"], ["payload", nil], ["occurred_at", "2026-01-09 09:20:43.347298"], ["created_at", "2026-01-09 10:20:43.348784"], ["updated_at", "2026-01-09 10:20:43.348784"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_events" ("email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["event_type", "delivered"], ["provider", "test"], ["payload", nil], ["occurred_at", "2026-01-09 09:50:43.349042"], ["created_at", "2026-01-09 10:20:43.349111"], ["updated_at", "2026-01-09 10:20:43.349111"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_events".* FROM "sent_emails_events" WHERE "sent_emails_events"."email_id" = ? ORDER BY "sent_emails_events"."occurred_at" DESC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.349841"], ["updated_at", "2026-01-09 10:20:43.349841"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_events".* FROM "sent_emails_events" WHERE "sent_emails_events"."email_id" = ? ORDER BY "sent_emails_events"."occurred_at" DESC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.350527"], ["updated_at", "2026-01-09 10:20:43.350527"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.351024"], ["updated_at", "2026-01-09 10:20:43.351024"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", "welcome_email"], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.351550"], ["updated_at", "2026-01-09 10:20:43.351550"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.352041"], ["updated_at", "2026-01-09 10:20:43.352041"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"first@example.com\",\"second@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.352537"], ["updated_at", "2026-01-09 10:20:43.352537"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"to@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.353083"], ["updated_at", "2026-01-09 10:20:43.353083"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", "[\"user@example.com\"]"], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:20:43.353571"], ["updated_at", "2026-01-09 10:20:43.353571"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_emails"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "sent_emails_emails" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" varchar, "mailer" varchar, "action" varchar, "template_path" varchar, "mailer_params" json, "delivery_method" varchar, "provider" varchar, "delivery_settings" json, "from_address" varchar NOT NULL, "to_addresses" json NOT NULL, "cc_addresses" json, "bcc_addresses" json, "subject" varchar, "text_body" text, "html_body" text, "headers" json, "status" varchar DEFAULT 'pending', "sent_at" datetime(6), "delivered_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sent_emails_emails_on_message_id" ON "sent_emails_emails" ("message_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_status" ON "sent_emails_emails" ("status")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_emails_on_created_at" ON "sent_emails_emails" ("created_at")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_attachments"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "filename" varchar, "content_type" varchar, "byte_size" integer, "blob" blob, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_d7c0713aab"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "sent_emails_events"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "sent_emails_events" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email_id" bigint NOT NULL, "event_type" varchar, "provider" varchar, "payload" json, "occurred_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_313cea0514"
FOREIGN KEY ("email_id")
  REFERENCES "sent_emails_emails" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_email_id" ON "sent_emails_events" ("email_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_sent_emails_events_on_event_type" ON "sent_emails_events" ("event_type")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (0)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2026-01-09 10:21:14.292260', '2026-01-09 10:21:14.292262') RETURNING "key"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:21:14.320487"], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.325106"], ["updated_at", "2026-01-09 10:21:14.325106"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_emails"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:21:14.333736"], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.334018"], ["updated_at", "2026-01-09 10:21:14.334018"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:21:14.334954"], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.335152"], ["updated_at", "2026-01-09 10:21:14.335152"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:21:14.335759"], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.335941"], ["updated_at", "2026-01-09 10:21:14.335941"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:21:14.336496"], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.336669"], ["updated_at", "2026-01-09 10:21:14.336669"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:21:14.337198"], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.337367"], ["updated_at", "2026-01-09 10:21:14.337367"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:21:14.337906"], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.338077"], ["updated_at", "2026-01-09 10:21:14.338077"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "mailpace"], ["provider", "mailpace"], ["delivery_settings", "{}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:21:14.339531"], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.339711"], ["updated_at", "2026-01-09 10:21:14.339711"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", "Test Subject"], ["text_body", nil], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:21:14.340254"], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.340433"], ["updated_at", "2026-01-09 10:21:14.340433"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test@example.com"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test@example.com"], ["mailer", "TestMailer"], ["action", "test_action"], ["template_path", "test_mailer/test_action"], ["mailer_params", "{\"user_id\":1}"], ["delivery_method", "smtp"], ["provider", "mailpace"], ["delivery_settings", "{\"address\":\"smtp.mailpace.com\",\"port\":\"587\"}"], ["from_address", "sender@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", "[]"], ["bcc_addresses", "[]"], ["subject", "Test with attachment"], ["text_body", "Test body"], ["html_body", nil], ["headers", "{}"], ["status", "sent"], ["sent_at", "2026-01-09 10:21:14.346670"], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.346887"], ["updated_at", "2026-01-09 10:21:14.346887"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_attachments" ("email_id", "filename", "content_type", "byte_size", "blob", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["filename", "test.txt"], ["content_type", "text/plain; filename=test.txt"], ["byte_size", 12], ["blob", nil], ["created_at", "2026-01-09 10:21:14.354636"], ["updated_at", "2026-01-09 10:21:14.354636"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Attachment Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ?[0m  [["email_id", 1]]
  [1m[36mSentEmails::Attachment Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_attachments".* FROM "sent_emails_attachments" WHERE "sent_emails_attachments"."email_id" = ? ORDER BY "sent_emails_attachments"."id" ASC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
[SentEmails::Mailpace] Signature verification failed: expected 64 byte signature, got 4
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.360521"], ["updated_at", "2026-01-09 10:21:14.360521"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_events"[0m
  [1m[36mSentEmails::Event Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sent_emails_events"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.361915"], ["updated_at", "2026-01-09 10:21:14.361915"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.362982"], ["updated_at", "2026-01-09 10:21:14.362982"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."message_id" = ? LIMIT ?[0m  [["message_id", "test-message-id"], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", "test-message-id"], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "test@example.com"], ["to_addresses", "[\"recipient@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.363742"], ["updated_at", "2026-01-09 10:21:14.363742"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-07 10:21:14.365516"], ["updated_at", "2026-01-09 10:21:14.365619"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 09:21:14.365875"], ["updated_at", "2026-01-09 10:21:14.365930"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" ORDER BY "sent_emails_emails"."created_at" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "delivered"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.366710"], ["updated_at", "2026-01-09 10:21:14.366710"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "pending"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.367006"], ["updated_at", "2026-01-09 10:21:14.367006"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ? AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [["status", "delivered"], ["id", 1], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ? AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [["status", "delivered"], ["id", 2], ["LIMIT", 1]]
  [1m[36mSentEmails::Email Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_emails".* FROM "sent_emails_emails" WHERE "sent_emails_emails"."status" = ?[0m  [["status", "delivered"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", "Welcome to our service"], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.367799"], ["updated_at", "2026-01-09 10:21:14.367799"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE ((subject LIKE ?) OR (to_addresses LIKE ?)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%Welcome%"], [nil, "%Welcome%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.368607"], ["updated_at", "2026-01-09 10:21:14.368607"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE ((subject LIKE ?) OR (to_addresses LIKE ?)) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%user@example.com%"], [nil, "%user@example.com%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.369218"], ["updated_at", "2026-01-09 10:21:14.369218"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "sent_emails_emails" WHERE (to_addresses LIKE ?) AND "sent_emails_emails"."id" = ? LIMIT ?[0m  [[nil, "%user@example.com%"], ["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.369815"], ["updated_at", "2026-01-09 10:21:14.369815"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_events" ("email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["event_type", "queued"], ["provider", "test"], ["payload", nil], ["occurred_at", "2026-01-09 09:21:14.370069"], ["created_at", "2026-01-09 10:21:14.371466"], ["updated_at", "2026-01-09 10:21:14.371466"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Create (0.0ms)[0m  [1m[32mINSERT INTO "sent_emails_events" ("email_id", "event_type", "provider", "payload", "occurred_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email_id", 1], ["event_type", "delivered"], ["provider", "test"], ["payload", nil], ["occurred_at", "2026-01-09 09:51:14.371703"], ["created_at", "2026-01-09 10:21:14.371773"], ["updated_at", "2026-01-09 10:21:14.371773"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_events".* FROM "sent_emails_events" WHERE "sent_emails_events"."email_id" = ? ORDER BY "sent_emails_events"."occurred_at" DESC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.372476"], ["updated_at", "2026-01-09 10:21:14.372476"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Event Load (0.0ms)[0m  [1m[34mSELECT "sent_emails_events".* FROM "sent_emails_events" WHERE "sent_emails_events"."email_id" = ? ORDER BY "sent_emails_events"."occurred_at" DESC LIMIT ?[0m  [["email_id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.373119"], ["updated_at", "2026-01-09 10:21:14.373119"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.373601"], ["updated_at", "2026-01-09 10:21:14.373601"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", "welcome_email"], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.374110"], ["updated_at", "2026-01-09 10:21:14.374110"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", "UserMailer"], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.374584"], ["updated_at", "2026-01-09 10:21:14.374584"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"first@example.com\",\"second@example.com\"]"], ["cc_addresses", nil], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.375066"], ["updated_at", "2026-01-09 10:21:14.375066"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"to@example.com\"]"], ["cc_addresses", "[\"cc@example.com\"]"], ["bcc_addresses", "[\"bcc@example.com\"]"], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.375562"], ["updated_at", "2026-01-09 10:21:14.375562"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSentEmails::Email Create (0.1ms)[0m  [1m[32mINSERT INTO "sent_emails_emails" ("message_id", "mailer", "action", "template_path", "mailer_params", "delivery_method", "provider", "delivery_settings", "from_address", "to_addresses", "cc_addresses", "bcc_addresses", "subject", "text_body", "html_body", "headers", "status", "sent_at", "delivered_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["message_id", nil], ["mailer", nil], ["action", nil], ["template_path", nil], ["mailer_params", nil], ["delivery_method", nil], ["provider", nil], ["delivery_settings", nil], ["from_address", "noreply@example.com"], ["to_addresses", "[\"user@example.com\"]"], ["cc_addresses", "[\"user@example.com\"]"], ["bcc_addresses", nil], ["subject", nil], ["text_body", nil], ["html_body", nil], ["headers", nil], ["status", "sent"], ["sent_at", nil], ["delivered_at", nil], ["created_at", "2026-01-09 10:21:14.376035"], ["updated_at", "2026-01-09 10:21:14.376035"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN deferred TRANSACTION[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TRANSACTION[0m
